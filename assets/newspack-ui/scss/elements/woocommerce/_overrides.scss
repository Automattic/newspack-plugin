// Some general overrides for WooCommerce styles.
.newspack-ui {
	label .optional {
		color: var( --newspack-ui-color-neutral-60 );
		font-weight: 400;
	}

	form p {
		margin: 0 0 var( --newspack-ui-spacer-5 );

		&:last-child {
			margin-bottom: 0;
		}
	}

	&__modal--small {
		form p {
			margin: 0 0 var( --newspack-ui-spacer-2 );

			&:last-child {
				margin-bottom: 0;
			}
		}
	}

	.newspack-ui__input-card {
		label {
			display: block;
		}
	}

	// Override checkout form heading.
	.woocommerce .order-details-summary {
		// Top margin not needed in newspack ui modal.
		h2 {
			margin-top: 0;
		}
	}

	// Override checkout and billing form headings spacing.
	.woocommerce-billing-fields h3,
	.woocommerce-additional-fields h3,
	.woocommerce-checkout h3,
	.woocommerce-form-coupon h3 {
		font-size: var(--newspack-ui-font-size-s);
		margin: 1rem 0 !important;
	}

	// Override checkout payment method box.
	.wc_payment_method {
		span {
			font-weight: var( --newspack-ui-font-weight-strong );
		}

		.payment_box {
			background: transparent;
			font-weight: normal;
			padding: 0;

			p {
				font-size: var(--newspack-ui-font-size-xs);
			}

			ul.wc-saved-payment-methods {
				li {
					margin-bottom: var(--newspack-ui-spacer-3);

					input {
						margin-right: 8px;
					}
				}
			}

			fieldset {
				margin-bottom: var(--newspack-ui-spacer-2);

				&:last-child {
					margin-bottom: 0;
				}

				p {
					font-size: var(--newspack-ui-font-size-xs);
					margin-bottom: 0;

					&.form-row {
						display: flex;
						align-items: flex-start;

						input {
							margin-right: var(--newspack-ui-spacer-2);
						}

						label {
							margin-bottom: 0;
							font-weight: normal;
						}
					}
				}
			}
		}

		// If the only payment option, we're hiding the radio selection so we don't need a grid.
		&:first-child:last-child .newspack-ui__input-card {
			grid-template-columns: none;
			gap: 0;
		}
	}

	// Stripe inputs
	.wc-credit-card-form {
		.form-row-wide {
			margin-bottom: var( --newspack-ui-spacer-base );
		}
		.wc-stripe-elements-field,
		.wc-stripe-iban-element-field {
			border: 1px solid var( --newspack-ui-color-input-border );
			border-radius: var( --newspack-ui-border-radius-m );
			display: block;
			font-family: var( --newspack-ui-font-family);
			font-size: var( --newspack-ui-font-size-s );
			line-height: var( --newspack-ui-line-height-l );
			padding: calc( var( --newspack-ui-spacer-2 ) - 1px ) calc( var( --newspack-ui-spacer-3 ) - 1px );
		}

		&:has( div.stripe-source-errors[role="alert"]:not( :empty ) ) {
			.wc-stripe-elements-field,
			.wc-stripe-iban-element-field {
				border-color: var( --newspack-ui-color-error-50 );
			}

			label {
				color: var( --newspack-ui-color-error-50 );
			}

			.woocommerce_error {
				background: transparent;
				color: var( --newspack-ui-color-error-50 );
				font-family: var( --newspack-ui-font-family );
				font-size: var( --newspack-ui-font-size-xs );
				padding: 0;
			}
		}
	}

	.wc_payment_methods label[for="payment_method_stripe"].newspack-ui__input-card {
		padding: var( --newspack-ui-spacer-5 ) !important;
	}

	// Override billing details spacing.
	.billing-details {
		p {
			margin: 0;
		}

		h3 {
			margin-bottom: var(--newspack-ui-spacer-base);
		}
	}

	// Order review table.
	.woocommerce-checkout-review-order-table {
		thead th,
		.recurring-totals th {
			background: transparent;
		}

		.cart-subtotal th,
		.cart-subtotal td,
		small {
			font-size: var( --newspack-font-size-xs );
		}
	}

	.woocommerce .first-payment-date {
		font-family: var( --newspack-ui-font-family );
	}

	// Override checkout form terms and condition text.
	.woocommerce-terms-and-conditions-wrapper {
		font-size: var(--newspack-ui-font-size-xs);
		margin-bottom: 0;
	}

	// Override checkout form coupon field.
	.woocommerce-form-coupon {
		p:first-of-type {
			display: flex;
			align-items: center;
			margin: var(--newspack-ui-spacer-2) 0;

			input {
				margin-right: var(--newspack-ui-spacer-base);
			}

			button {
				margin-bottom: 0;
			}
		}
	}

	// Override checkout form subscriptions gift toggle.
	.newspack-wcsg--gift-toggle {
		margin-bottom: 0;

		label {
			display: flex !important;
		}
	}

	// Required fields.
	.woocommerce form .form-row .required {
		color: var( --newspack-ui-color-error-50 );
	}

	// Errors
	.woocommerce-invalid {
		input,
		textarea,
		.select2-container--default .select2-selection--single {
			border-color: var( --newspack-ui-color-error-50 );

			&:focus {
				outline-color: var( --newspack-ui-color-error-50 );
			}
		}

		label {
			color: var( --newspack-ui-color-error-50 );
		}
	}
}
